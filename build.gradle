apply plugin: 'java'

compileJava.options.encoding = 'UTF-8'
sourceCompatibility = 1.6
targetCompatibility = 1.6

jar {
    baseName = 'dictionary'
    version = '0.3.8'
    manifest {
        attributes('Main-Class': 'metis.dictionary.Dictionary')
    }
}

task checkDataFileFormat << {
    File file = new File("src/main/resources/resources/dictionary.data")
    file.eachLine { line, count ->
        if (!line.startsWith(' ') || !line.endsWith(' ') || !line.contains(' :: ')) {
            throw new GradleException("Incorrect data file format, line: ${count}, content:'${line}'")
        }
    }
}

build.dependsOn checkDataFileFormat
