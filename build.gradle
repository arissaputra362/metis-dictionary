apply plugin: 'java'

compileJava.options.encoding = 'UTF-8'
sourceCompatibility = 1.6
targetCompatibility = 1.6

jar {
    baseName = 'dictionary'
    version = '0.3.8'
    manifest {
        attributes('Main-Class': 'metis.dictionary.Dictionary')
    }
}

task checkDataFileFormat {
    doLast {
        File file = new File("${projectDir}/src/main/resources/resources/dictionary.data")
        file.eachLine { line, count ->
            if (!(line ==~ / .+ :: .+ /)) {
                throw new GradleException("Incorrect data file format, line: ${count}, content:'${line}'")
            }
        }
    }
}

check.dependsOn checkDataFileFormat
